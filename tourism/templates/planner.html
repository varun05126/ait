{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Plan a Trip ‚Äì AIT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="{% static 'css/style.css' %}">

<style>
/* ===== GLOBAL ===== */
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto,sans-serif;
background:radial-gradient(circle at top,#e0f2fe,#f8fafc 40%);
color:#0f172a}

/* ===== NAVBAR ===== */
.navbar-wrap{
max-width:1250px;
margin:24px auto 0;
padding:18px 26px;
border-radius:26px;
background:linear-gradient(135deg,#38bdf8,#0ea5e9);
box-shadow:0 25px 60px rgba(0,0,0,.18)}

.navbar{
display:flex;
align-items:center;
justify-content:space-between}

.brand h1{margin:0;font-size:2.1rem;font-weight:800}
.brand a{color:white;text-decoration:none}
.brand p{margin:4px 0 0;color:#e0f2fe;font-size:.95rem}

.nav-links{display:flex;gap:26px}
.nav-links a{
color:white;text-decoration:none;font-weight:600;font-size:.95rem;
position:relative}

.nav-links a::after{
content:"";position:absolute;left:0;bottom:-4px;
width:0;height:2px;background:white;transition:.3s}

.nav-links a:hover::after{width:100%}

/* ===== SEPARATOR ===== */
.nav-separator{
max-width:1250px;
margin:26px auto 18px;
height:1px;
background:linear-gradient(to right,transparent,rgba(14,165,233,.45),transparent);
}

/* ===== MAIN ===== */
main{
max-width:1250px;
margin:40px auto 80px;
padding:20px}

/* ======================
   PLANNER UI
====================== */

.planner-section{max-width:1000px;margin:auto}

.planner-card{
background:rgba(255,255,255,.75);
backdrop-filter:blur(20px) saturate(160%);
border-radius:28px;
padding:36px 40px;
box-shadow:0 30px 80px rgba(0,0,0,.12)}

.planner-card h2{
text-align:center;
font-size:2.2rem;
font-weight:800;
margin-bottom:1.8rem}

label{font-weight:600;font-size:.9rem}

input,select{
width:100%;
margin:.4rem 0 1.1rem;
padding:12px 14px;
border-radius:14px;
border:1px solid #e5e7eb;
font-size:.95rem}

input:focus,select:focus{
outline:none;
border-color:#38bdf8;
box-shadow:0 0 0 3px rgba(56,189,248,.25)}

button{
width:100%;
margin-top:.6rem;
padding:14px;
border:none;
border-radius:999px;
background:linear-gradient(135deg,#38bdf8,#0ea5e9);
color:white;
font-weight:800;
cursor:pointer;
box-shadow:0 14px 35px rgba(14,165,233,.45);
transition:.25s}

button:hover{
transform:translateY(-2px);
box-shadow:0 22px 50px rgba(14,165,233,.6)}

/* ======================
   ITINERARY
====================== */

.itinerary-card{
background:rgba(255,255,255,.72);
backdrop-filter:blur(18px);
border-radius:26px;
padding:26px 30px;
box-shadow:0 22px 55px rgba(0,0,0,.12);
margin-bottom:2rem}

.itinerary-header{
font-size:1.25rem;
font-weight:800;
margin-bottom:1rem}

.itinerary-item{
margin:.4rem 0;
font-size:.95rem;
color:#334155}

.budget-card{
background:rgba(255,255,255,.8);
border-radius:24px;
padding:26px;
box-shadow:0 20px 50px rgba(0,0,0,.12)}

</style>
</head>

<body>

<!-- NAVBAR -->
<div class="navbar-wrap">
  <div class="navbar">
    <div class="brand">
      <h1><a href="/">AIT ‚Äì AI Tourism</a></h1>
      <p>Smart travel planning powered by artificial intelligence</p>
    </div>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/destinations/">Destinations</a>
      <a href="/planner/">Plan a Trip</a>
      <a href="/chatbot/">Chatbot</a>
      <!-- <a href="/about/">About</a> -->
      <a href="/contact/">Contact</a>
    </div>
  </div>
</div>

<div class="nav-separator"></div>

<main>

<div class="planner-section">

<!-- FORM -->
<div class="planner-card">
<h2>‚ú® Plan Your Trip with AI</h2>

<form method="post">
{% csrf_token %}

<label>Destination</label>
<input type="text" name="destination" required value="{{ destination }}">

<label>Budget</label>
<select name="budget">
<option value="">-- Choose --</option>
<option value="budget" {% if budget == "budget" %}selected{% endif %}>Budget</option>
<option value="middle" {% if budget == "middle" %}selected{% endif %}>Middle</option>
<option value="rich" {% if budget == "rich" %}selected{% endif %}>Luxury</option>
</select>

<label>Start Date</label>
<input type="date" name="start_date" required value="{{ start_date }}">

<label>End Date</label>
<input type="date" name="end_date" required value="{{ end_date }}">

<label>Interests</label>
<input type="text" name="interests" placeholder="Beaches, food, temples, adventure..." value="{{ interests }}">

<button type="submit">Generate AI Itinerary</button>
</form>
</div>

<!-- OUTPUT -->
{% if plan %}
<div style="margin-top:3.5rem;">
<h2 style="text-align:center;font-size:2.2rem;font-weight:800;margin-bottom:2.2rem;">üó∫Ô∏è Your AI Travel Plan</h2>

{% for day in plan %}
<div class="itinerary-card">
<div class="itinerary-header">üìÖ {{ day.0 }}</div>

{% for line in day|slice:"1:" %}
{% with l=line|lower %}
{% if "food" in l or "restaurant" in l or "cafe" in l or "hotel" in l or "biryani" in l or "lunch" in l or "dinner" in l %}
<p class="itinerary-item">üçΩÔ∏è {{ line }}</p>
{% elif "temple" in l or "church" in l or "mosque" in l %}
<p class="itinerary-item">üõï {{ line }}</p>
{% elif "museum" in l or "gallery" in l %}
<p class="itinerary-item">üñºÔ∏è {{ line }}</p>
{% elif "beach" in l or "lake" in l or "waterfall" in l or "park" in l %}
<p class="itinerary-item">üåø {{ line }}</p>
{% elif "mall" in l or "market" in l or "bazaar" in l or "shopping" in l %}
<p class="itinerary-item">üõçÔ∏è {{ line }}</p>
{% elif "fort" in l or "palace" in l or "monument" in l %}
<p class="itinerary-item">üèõÔ∏è {{ line }}</p>
{% else %}
<p class="itinerary-item">üìç {{ line }}</p>
{% endif %}
{% endwith %}
{% endfor %}
</div>
{% endfor %}

{% if estimated_budget %}
<div class="budget-card" style="text-align:center;margin-top:2rem">
<h3>üí∞ Estimated Budget</h3>
<p><strong>Total:</strong> ‚Çπ{{ estimated_budget }}</p>
<p><strong>Per Day:</strong> ‚Çπ{{ daily_budget }}</p>
</div>
{% endif %}

</div>
{% endif %}

</div>
</main>

</body>
</html>